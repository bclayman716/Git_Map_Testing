<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>Timer Tester</title>
    <!-- Button Library -->
    <link rel="stylesheet" href="http://unicorn-ui.com/css/builder.css">
    <!-- Sound Library -->
    <script src = "https://cdnjs.cloudflare.com/ajax/libs/pizzicato/0.6.1/Pizzicato.js"></script>

  </head>

  <!-- <h1><time>00:00:00</time></h1> -->
  <h1><time>Get Ready</time></h1>
  <button id="start" class="button button-rounded button-primary">Start</button>
  <button id="stop" class="button button-rounded button-action">Stop</button>
  <button id="reset" class="button button-rounded">Reset</button>
  <body>
    <script>

      // var sineWave = new Pizzicato.Sound({
      //   source: 'wave',
      //   options: {
      //     frequency: 440,
      //     time: 0.4
      //   }
      // });
      //
      // var start = document.getElementById('start');
      //
      // start.onclick = sineWave.play();

      var h1 = document.getElementsByTagName('h1')[0],
      // down = document.getElementsByTagName('h1')[0],
      start = document.getElementById('start'),
      stop = document.getElementById('stop'),
      clear = document.getElementById('reset'),
      dseconds = 4,
      seconds = 0, minutes = 0, hours = 0,
      t,
      d;




      function sub(){
        dseconds--;
        if (dseconds >= 0){
          h1.textContent = (dseconds);
          decrease();
        }
        else{
          add();
        }
      }

      function decrease(){
        d = setTimeout(sub, 1000);
      }
      // decrease();

      start.onclick = decrease;

      // stopwatch
      function add(){
         seconds++;
         if (seconds >= 60){
           seconds = 0;
           minutes++;
           if (minutes>=60){
             minutes = 0;
             hours++
           }
         }
         h1.textContent = (hours ? (hours > 9 ? hours : "0" + hours) : "00") + ":" + (minutes ? (minutes > 9 ? minutes : "0" + minutes) : "00") + ":" + (seconds > 9 ? seconds : "0" + seconds);
        timer();
      }

      function timer(){
        t = setTimeout(add,1000);
      }
      // timer(); // auto start

      stop.onclick = function() {
        clearTimeout(t);
      }


      clear.onclick = function() {
        h1.textContent = "00:00:00";
        seconds = 0; minutes = 0; hours = 0;
      }
    </script>
  </body>
</html>
